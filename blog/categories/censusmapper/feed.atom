<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: censusmapper | Mountain Doodles]]></title>
  <link href="http://doodles.mountainmath.ca/blog/categories/censusmapper/feed.atom" rel="self"/>
  <link href="http://doodles.mountainmath.ca/"/>
  <updated>2017-01-31T16:48:52-08:00</updated>
  <id>http://doodles.mountainmath.ca/</id>
  <author>
    <name><![CDATA[MountainMath]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Trick-or-Treat 2016]]></title>
    <link href="http://doodles.mountainmath.ca/blog/2016/10/21/trick-or-treat-2016/"/>
    <updated>2016-10-21T20:38:14-07:00</updated>
    <id>http://doodles.mountainmath.ca/blog/2016/10/21/trick-or-treat-2016</id>
    <content type="html"><![CDATA[<p><a href="https://censusmapper.ca/maps/529" target="_blank"><img  src="http://doodles.mountainmath.ca/images/tot_density.png" style="width:50%;float:right;margin-left:10px;"></a>
A year ago, as were were just getting CensusMapper up and running, we put out three Halloween-themed census maps. Those
maps almost broke our servers when they went viral. At least as viral as census data goes. They were viewed by over
150,000 Canadians over the course of three days. And many of those came back to view the maps more than once.</p>

<p>Lots of things have happened at CensusMapper since last year, and we heeded the call and put some of CensusMapper&rsquo;s prowess
to use to make some important improvements for this Halloween.</p>

<!-- more -->


<p>We are stuck in a weired place this year. We just completed the
<a href="https://twitter.com/NavdeepSBains/status/770281404848566273">most successful census in the Canadian history</a> this May,
but the results are still undergoing quality control and will only get released starting this coming spring. The 2011
census, that last year&rsquo;s maps are based on, is now 5 years old. Some children that were of prime trick-or-treating age
(which we take as 5 to 14 years old) in 2011 are now in College. And some that weren&rsquo;t even borne in 2011 will be out
knocking on doors this Halloween.</p>

<p>As people move around, the composition of neighbourhoods does not change all that much over time. Young kids grow up to take
the place of the older kids in the neighbourhood. That was our take last year, as we were still mapping 2011 data to
give people an idea how many kids would show up on their door or where to expect the most foot traffic.</p>

<h3>The maps</h3>

<p>Last year we made three maps, the
<a href="https://censusmapper.ca/maps/137">Trick-or-Treat Density map</a> that visualized the expected trick-or-treat foot traffic,
the <a href="https://censusmapper.ca/maps/136">Trick-or-Treat Onslaught Map</a> that visualized how many kids to expect at your
door and the <a href="https://censusmapper.ca/maps/138">Haunted House Map</a>
that&rsquo;s mapping homes occupied by ghosts and other &ldquo;unusual residents&rdquo;.</p>

<p>This year we improved on those maps by building a dynamic estimator that estimates conditions on the ground this Halloween. We
have:</p>

<table>
<tr>
<td style="width:25%;padding:3%">
<a href="https://censusmapper.ca/maps/529" target="_blank"><img  src="http://doodles.mountainmath.ca/images/tot_density.png" style="width:100%"></a>
</td>
<td style="width:25%;padding:3%">
<a href="https://censusmapper.ca/maps/528" target="_blank"><img  src="http://doodles.mountainmath.ca/images/tot_onslaught.png" style="width:100%"></a>
</td>
<td style="width:25%;padding:3%">
<a href="https://censusmapper.ca/maps/138" target="_blank"><img  src="http://doodles.mountainmath.ca/images/tot_haunted_houses.png" style="width:100%"></a>
</td>
<tr> 
</table>


<ul>
<li><p><a class='btn btn-success' href="https://censusmapper.ca/maps/529" target="_blank">Trick-or-Treat Density Estimator</a>
that estimates the number of children of prime trick-or-treat age per area, so the expected trick-or-treat foot traffic
in each area. Use this map if you plan on taking your kids out trick-or-treating and want to make sure you find the area
in your neighbourhood with the most kids out on the street.</p></li>
<li><p><a class='btn btn-success' href="https://censusmapper.ca/maps/528" target="_blank">Trick-or-Treat Onslaught Estimator</a>
that estimates the number of children of prime trick-or-treat age per doorbell. Use this map if you are guarding the door
and want to know how much candy you should have ready.</p></li>
<li><p><a class='btn btn-success' href="https://censusmapper.ca/maps/528" target="_blank">Haunted Houses Map</a> that shows
the houses that were occupied only by ghosts or <em>unusual residents</em> in May 2011. As ghosts and <em>unusual residents</em> tend
to be restless we were not comfortable making estimates where they may be now,
even with all of CensusMapper&rsquo;s power behind it. So we only have the 2011 map to give some inspiration where the best
chances might be to run into ghosts or cross paths with <em>unusual residents</em>.</p></li>
</ul>


<h3>How did we estimate things for 2016 Halloween?</h3>

<p>An skillful estimator strikes a balance between simplicity and effectiveness. We decided to make use of the
following data:</p>

<ul>
<li>The number of children in the age brackets 0-4, 5-9 and 10-14 in each area in 2011.</li>
<li>The number of children in the age brackets 0-4, 5-9 and 10-14 in each area in 2006.</li>
<li>The percentage of the population in each area in 2011 that did not move between 2006 and 2011.</li>
</ul>


<p>Based on this, we split the estimate of the number of children in each area in 2016 into two groups. Children that
already lived in the are in 2011 and still live there in 2016, and children that moved into the area between 2011 and 2016.
We estimate the proportion by using the proportion of people that did not move between 2006 and 2011 as a proxy.</p>

<p>Then estimating the number of children that did not move is easy, we simply age the children we saw in 2011 forward by
five years and weight them by the proportion of non-movers.</p>

<p>To estimate the number of children moving into the area take into account at the trends from 2006 to 2011 in each area
and extrapolate from there to 2016. And weight the number by the proportion of the population that did move and also
allow for some population growth according to the 2006 to 2011 trend.</p>

<p>I will spare you the exact formula. It is possible that refining the model and adding in more variables could make some
improvements to the estimates, but overcomplicating the model also leads to risks of exaggeratig biases. We feel that
our simplistic model strikes a good balance between simplicity and effectiveness. It will be interesting to see how we
did when 2016 data comes in.</p>

<h3>The Super Nerdy Details</h3>

<p>For the data nerds still reading, the CensusMapper servers actually don&rsquo;t do any of that work. They just server straight-up
census data. Plus the instructions of how to use the data to make the map. All the computations and drawings are then
done locally on each user&rsquo;s browser. That&rsquo;s what keeps our servers
lean, responsive, and most importantly maintains maximum flexibility. With the same process we can easily map any function
built from census variables. Canada-wide and across all the entire geographical census hierarchy, from all of Canada down
to Dissemination Areas and, for some data, even Dissemination Blocks. Bwetween the 2006 and 2011 census
variables and all the different geographic regions we have about 1 billion fields in our database that we can map
dynamically. Still a far cry from &ldquo;big data&rdquo;, but enough to require some careful architecture choices.</p>

<h3>Census Mapping for Everyone</h3>

<p>Census data can be very complex and mixing various variables is powerful yet prone to produce meaningless maps due to
misinterpretation of the census variables. Since last Halloween and now we are proud to have been able to open up some
of CensusMapper&rsquo;s capabilities to the general public. Everyone can now make Canada-wide interactive maps based on single
2011 census variables via a couple of mouse clicks and share the freely. You can read more about this
<a href="http://doodles.mountainmath.ca/blog/2016/05/04/census-mapping-for-everyone/">in a previous blog post</a> or
<a href="https://censusmapper.ca/maps/new">jump right in and make your own map</a>.</p>

<h3>FAQ</h3>

<p>Here are some of the questions we got most last year:</p>

<h5>Are the maps only for Vancouver?</h5>

<p>No. All CensusMapper maps are fully interactive and by default Canada-wide. Use the search function or geo-location
button to switch to any place in Canada that tickles your interest. Pan and zoom around to explore. You can always share
the current view of the map with your friends by grabbing the URL in your browser address bar or using the build in share buttons.</p>

<h5>What&rsquo;s the difference between the Trick-or-Treat Density and the Trick-or-Treat Onslaught map?</h5>

<p>The maps are related, both map the number of children of prime trick-or-treat age, but they are normalized differently.
The Density map considers the number of children per area. This estimates how many you will see out on the street in the area.
The Onslaught map considers the number of children per door, so you can estimate how many will come knocking.
The difference can be seen in high density areas like Yaletown in Vancouver. There are a lot of kids living in Yaletown
in a fairly small area, so the expected foot traffic is high. But these kids distribute over the units in the highrises
there and on a per household (or per door) basis, the number of kids per household does not stand out.</p>

<h5>How accurate are the predictions?</h5>

<p>Accuracy of predictions vary. Some parents will drive their kids halfway across town to find the best area for
trick-or-treating. Some areas change too fast for our estimator to catch on. And some neighbourhoods have traditions and
local areas where kids congregate that we don&rsquo;t have data for. So these maps are best use in conjunction with local data.</p>

<h5>Won&rsquo;t your maps lead to more people trick-or-treating outside of their neighbourhood?</h5>

<p>While our maps can be used to facilitate driving kids across town to trick-or-treat, we encourage everyone to also
use the map to find areas near
where they live, and where the kids can walk to. We believe an important part of the Halloween experience is for everyone
to get to know their own neighbourhood better, see things in a new light and experience the
joys of running into friends and acquaintances, and making new friends, along the way.</p>

<h5>I am running out of candy / I got way too much candy!</h5>

<p>The Onslaught map just estimates the average number of children that knock on doors in each area. Some doors will see a
lot more kids than others. Take the Yaletown example from above. Most
of the action happens on the street. So while on average people can only expect a moderate number of trick-or-treaters
at their door, the ones at ground level will be <em>very</em> busy, while the ones higher up will likely just see one or two
neighbour kids from the same floor.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Census Mapping for Everyone]]></title>
    <link href="http://doodles.mountainmath.ca/blog/2016/05/04/census-mapping-for-everyone/"/>
    <updated>2016-05-04T11:45:39-07:00</updated>
    <id>http://doodles.mountainmath.ca/blog/2016/05/04/census-mapping-for-everyone</id>
    <content type="html"><![CDATA[<p>At CensusMapper, we have come a long way from first <a href="http://doodles.mountainmath.ca/blog/2015/06/23/vancouver-2011-census-data-on-housing/">dabbling in census data</a> to
building out a <a href="http://doodles.mountainmath.ca/blog/2015/09/28/census-mapper/">platform to map data Canada wide</a>, adding
the ability to <a href="http://doodles.mountainmath.ca/blog/2015/10/24/census-drilldown/">easily drill down into individual census regions</a>,
<a href="http://doodles.mountainmath.ca/blog/2015/12/27/canvas-vs-svg/">improving mapping efficiency</a>, adding the ability to
<a href="http://doodles.mountainmath.ca/blog/2016/04/20/tod-mode-share/">automatically populate custom geographic data with census variables</a>
and <a href="http://doodles.mountainmath.ca/blog/2016/05/02/census-week/">adding older census data</a>.</p>

<p>We believe all of these are comparatively small steps compared to the opening up of map making capabilities for everyone
that we are rolling out today. Free to use, free of charge. Statistic Canada <a href="http://www.statcan.gc.ca/eng/reference/licence-eng">opened up census data</a>
for anyone to use, but the sheer volume of available data and complexities of mapping geographic data has kept this
inaccessible to many.</p>

<p>By opening up basic map making capabilities to everyone we are putting the liberating that data from depth of spreadsheets and
database servers and opening it up to everyone. One map at a time.  Read on for tips and tricks or head right on over
to <a href="https://censusmapper.ca" class="btn btn-primary">Censusmapper</a> to make your first CensusMapper map!</p>

<!-- more -->


<h3>Simple Maps</h3>

<p><img  src="http://doodles.mountainmath.ca/images/make_a_map.png"  style="width:30%;float:right;margin-left:10px;">
To make your own map, start by choosing &ldquo;Start New 2011 Map&rdquo; from the &ldquo;Make a Map&rdquo; menu. If you are planning on saving
and sharing your map you should log in or create an account first, but you can play with mapping census data without an account.</p>

<p><img  src="http://doodles.mountainmath.ca/images/signin.png"  style="width:25%;float:left;margin-right:10px;">
We tried to make logging in super simple by providing oAuth signup with popular providers, but you can also go the old
fashioned way and create an account manually by providing username (email) and custom password.</p>

<p><img  src="http://doodles.mountainmath.ca/images/census_variables_menu.png"  style="width:30%;float:right;margin-left:10px;">
To start your new map, navigate down to the census variable picker at the bottom of the sidebar. Click the bars
to expand or collapse them. Once you found a variable you want to map, click
the &lsquo;globe&rsquo; icon and select how you want to map the variable.</p>

<p><img  src="http://doodles.mountainmath.ca/images/map_variable.png"  style="width:50%;float:left;margin-right:10px;">
Depending on what variable you choose you have the option to map simply map the variable, in this case the total number
of people that are married or living with a common law partner, or map the variable as a percentage of a &ldquo;parent&rdquo; variable,
so in this case map the percentage of people that are married or living with a common law partner out of all people 15 years
or over. If in doubt what the variables mean, head over to the
<a href="https://www12.statcan.gc.ca/census-recensement/2011/ref/dict/98-301-X2011001-eng.pdf">Census Dictionary</a>
to look up the definitions.</p>

<p><img  src="http://doodles.mountainmath.ca/images/finished_map_1.png"  style="width:50%;float:right;margin-left:10px;">
Once you press the button CensusMapper will do it&rsquo;s magic and map the data for you. Zoom pan and use the search bar to expore
the data across different regions and geographic aggregation levels in Canada. You may want to edit the automatically
generated map label to make it more concise.</p>

<p><img  src="http://doodles.mountainmath.ca/images/finished_map_2.png"  style="width:30%;float:left;margin-right:10px;">
To style your map you can select the &ldquo;Colors&rdquo; option in the orange map editor menu in the sidebar.</p>

<p><img  src="http://doodles.mountainmath.ca/images/finished_map_3.png"  style="width:50%;float:right;margin-left:10px;">
There you can style your map by selecting a custom color scheme and fine tune your domain cutoffs.</p>

<p><img  src="http://doodles.mountainmath.ca/images/finished_map_4.png"  style="width:50%;float:left;margin-right:10px;">
If you were signed in you could now select the &ldquo;Save Map&rdquo; option from the map editor menu and add a map title and a map
description. Map descriptions can be styled in <a href="https://daringfireball.net/projects/markdown/">markdown</a>.</p>

<p>Maps can tell many different stories, use the map description to give some background and rational for your
map. A good map story might link to different views of the map to support the story telling. You can use the &ldquo;Paste link
to current view into description&rdquo; button to link to different map views. You can also link to different CensusMapper maps
to create deeply integrated map stories. Rich map stories can provide powerful insights into our communities.</p>

<p>If you want to share your map with others, make sure you set the map visibility from &ldquo;Private&rdquo; to &ldquo;Published&rdquo;. Otherwise
others will get an &ldquo;access denied&rdquo; message when they attempt to view the map. Published maps will automatically appear on
the extended map list, so please take some time and write appropriate descriptions that others can enjoy them.</p>

<p>Head on over to <a href="https://censusmapper.ca" class="btn btn-primary">Censusmapper</a> to get started.</p>

<h3>Advanced Maps</h3>

<p>The ability to quickly map any census variable is quite liberating. At the same time it is also restrictive. Imagine
all the things that could be mapped if you could combine census variables in other ways. And CensusMapper has that
capability to dynamically weave a number of census variables into a function to be mapped. But with that comes another
level of complexity and potential pitfalls that, at the moment, prevents us from opening this up to the general public.</p>

<p>At the same time, we are still trying to figure out the overall funding model at CensusMapper. We believe that we have
plenty of value in our advanced mapping capabilities, as well as in our ability to
<a href="http://doodles.mountainmath.ca/blog/2016/04/20/tod-mode-share/">automatically populate custom geographic data with census variables</a>
and our backend data analysis capabilities to focus on paid products that allows us to open up the Simple Map model
for everyone for free. At CensusMapper, we love open data. And with time as we refine our funding model we may open up
more advanced mapping capabilities to put more data into the palm of everyone&rsquo;s hands.</p>

<h3>Our Worries</h3>

<p>We are also a bit worried about how CensusMapper will be used. The internet has the ability to turn the most beautiful
thing into something ugly, and we are hoping that mappers will use the tool responsibly and make meaningful maps that
tell a story, instead of vanity maps or maps meant to isolate or smear specific groups of people. If we feel that the
tool is being abused we might have to enforce a real name policy or partially close down CensusMapper. Please map responsibly.</p>

<h3>Bugs</h3>

<p>If you find any, let us know. The tool should work well on Mac using Chrome, Safari or Firefox and should work reasonably
well on Windows with Chrome and Firefox. iPad, iPhone and modern Android should also work well. Please contact us if you find
anything not working properly.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Census Week]]></title>
    <link href="http://doodles.mountainmath.ca/blog/2016/05/02/census-week/"/>
    <updated>2016-05-02T11:07:07-07:00</updated>
    <id>http://doodles.mountainmath.ca/blog/2016/05/02/census-week</id>
    <content type="html"><![CDATA[<p><img  src="http://doodles.mountainmath.ca/images/census.jpg"  style="width:50%;float:right;margin-left:10px;">
At CensusMapper we are super excited about Census Week 2016. Data is increasingly getting incorporated into local and
regional decision making. At CensusMapper we have been working to facilitate this by making this wealth of information
more accessible to everyone. To celebrate Census Week 2016 we have updated CensusMapper with 2006 census data for easy
comparisons with the 2011 data. And we have given CensusMapper a face lift by adding a histogram widget that interacts
with the mapping data. Watch for more exciting updates this week or read on for a sneak peak!</p>

<!-- more -->


<h3>2006 Census</h3>

<p><a href="http://http://censusmapper.ca/maps/37" target="_blank"><img  src="http://doodles.mountainmath.ca/images/affordability2011.png"  style="width:50%;float:right;margin-left:10px;"></a>
<a href="http://http://censusmapper.ca/maps/293" target="_blank"><img  src="http://doodles.mountainmath.ca/images/affordability2006.png"  style="width:50%;float:left;margin-right:10px;"></a>
We re-worked the backend to make it easy to add and map older censuses. And of course the 2016 census, once it becomes
available. At the first step, this allows side-by-side comparisons between different census years through our map-based
interface. As we explore this further we will add better ways to simultaneously browse two difference censuses, and we
will add a way to map data from two censuses on one the same map. Apart from some technical challenges that we know how
to handle, this also presents challenges when directly comparing the long form census to the 2011 NHS, which had different
collection methods that introduced biases that can be of the same magnitude as the changes one may want to measure.</p>

<h3>Widgets</h3>

<p>At CensusMapper we are all about interaction. We love exploring data visually, and our dynamic zoomable maps make browsing
census data very easy. But the maps are just scratching the surface. Often it is also usefuly to view a simple graph. That&rsquo;s
where the graph widgets come in, the first of which is the histogram that dynamically shows a histogram of the data visible
in the current map view.
<a href="http://censusmapper.ca/maps/76" target="_blank"><img  src="http://doodles.mountainmath.ca/images/animated_rent.gif" style="margin:10px;"></a></p>

<p>And of course the widget is fully linked with the map. Hover over a map region, and it will show where the mapped value fits into
histogram. Pan and zoom and the histogram updates automatically. The other way around, hover over a histogram bin and the
corresponding regions on the map get highlighted. That makes exploring the data so much easier.</p>

<h3>Make your own maps</h3>

<p>We will roll out basic map making capabilities for everyone later this week. How will this work? Census data is huge, so
it won&rsquo;t go completely without pain. But we try to make it as easy as possible. Once the new &ldquo;Make a Map&rdquo; option becomes
available you can browse through the list of census variables and simply select which one you want to map. You will have
the option to map the value or, if it makes sense, the value as a percentage of a &ldquo;parent&rdquo; variable.
<a href="http://censusmapper.ca" target="_blank"><img  src="http://doodles.mountainmath.ca/images/animated_simple.gif" style="margin:10px;"></a></p>

<p>A click of the mouse and you have a new map. Head over to the colour scheme picker and select the colour cutoffs to customize it.
You can even log in and save the map and write your own map story for the side bar, so that you can share and interactive
version of your map online. We can&rsquo;t wait getting census data into everyone&rsquo;s hands!</p>

<script>
function resetImages(){
    $('img').each(function(img){
        imgsrc = $(img).attr('src');
        if (imgsrc.slice(imgsrc.length-4)=='.gif') {
            $(img).attr('src', '');
            $(img).attr('src', imgsrc);
            
        }
    });
    setTimeout(function(){
        resetImages();
    },25000);
}
setTimeout(function(){
    resetImages();
},25000);
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[TOD Mode Share]]></title>
    <link href="http://doodles.mountainmath.ca/blog/2016/04/20/tod-mode-share/"/>
    <updated>2016-04-20T23:26:35-07:00</updated>
    <id>http://doodles.mountainmath.ca/blog/2016/04/20/tod-mode-share</id>
    <content type="html"><![CDATA[<p><a href="http://doodles.mountainmath.ca/skytrain_mode_map.html" target="_blank"><img  src="http://doodles.mountainmath.ca/images/mode_share.png"  style="width:50%;float:right;margin-left:10px;"></a>
Just saw a <a href="https://pricetags.wordpress.com/2016/04/20/surprising-densities-at-some-skytrain-stations/">comment on the Pricetags blog</a>
pointing to a nice <a href="http://summit.sfu.ca/system/files/iritems1/9819/ETD4936.pdf">master&rsquo;s thesis</a>
investigating various TOD metrics around skytrain stations. I got curious how the 2011 transit mode share compares to the earlier
census years listed in the thesis. And how the mode share varies spatially.</p>

<!-- more -->


<p>With <a href="http://censusmapper.ca/maps/316">CensusMapper</a> at my finger tips and building on the
<a href="http://doodles.mountainmath.ca/blog/2016/04/06/tod/">visuals from the previous post</a> this is an easy exercise.</p>

<p>We again simply map our concentric circles around the stations, but this time we turn them into pie charts to show the
commute to work mode share. And we show the values for the inner 400m circle and the 400m to 800m annulus separately. I
also added some basic land use data, green for parks, pink for instututional and light blue for commercial or industrial
to provide more context.</p>

<p>What we would expect to see is that the transit mode share is larger in the 400m buffer, but curiously this is not always the case.</p>

<p>Click, touch or hover to get the exact values. And sorry again, only new computers will get a meaningful result. Most
smart phones and tablets will have no problems.</p>

<iframe src="http://doodles.mountainmath.ca/skytrain_mode_map.html" width="80%" height="500", style="margin:5px 10%;"></iframe>


<p><a href="http://doodles.mountainmath.ca/skytrain_mode_map.html#11/49.2430/-123.0350" class="btn btn-primary">Full screen view</a></p>

<p>The City of Vancouver average transit mode share is 30%, for Metro it&rsquo;s 20%. Head over to <a href="http://censusmapper.ca/maps/316">CensusMapper</a>
to explore transit mode share in the region (or anywhere else in Canada) in more detail.</p>

<h3>What I missed</h3>

<p>The master&rsquo;s thesis was careful enough to exclude areas across the river from the analysis. That&rsquo;s good thinking, I only
took circular buffers around the stations to do this. As indicated in the <a href="http://doodles.mountainmath.ca/blog/2016/04/06/tod/">previous post</a>,
in the future we will add the capability to automatically generate isochrones, so areas
within 5 or 10 minutes walking distance, and use these
as regions, instead of using circular 400m and 800m buffers around the stations.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[TOD]]></title>
    <link href="http://doodles.mountainmath.ca/blog/2016/04/06/tod/"/>
    <updated>2016-04-06T16:22:36-07:00</updated>
    <id>http://doodles.mountainmath.ca/blog/2016/04/06/tod</id>
    <content type="html"><![CDATA[<p><a href="http://doodles.mountainmath.ca/skytrain_tod_map.html" target="_blank"><img  src="http://doodles.mountainmath.ca/images/skytrain_tod.png"  style="width:50%;float:right;margin-left:10px;"></a>
Just saw <a href="http://michaelmortensenblog.com/2016/04/05/transit-oriented-development-room-for-smart-growth-in-greater-vancouver/">this excellent post looking at density around transit stations</a>
today and though I should pull out some numbers
to go with the pretty visuals. And with CensusMapper&rsquo;s new capabilities of populating custom geometries with census data
estimates it&rsquo;s super-easy to do.</p>

<!-- more -->


<p>Population density is only one measure of interest here, job density or amenities density would be others. But for now let&rsquo;s
focus on population, so how many people live near the rapid transit stations. To keep things simple we checked for a 400m
and an 800m radius circle around the stations. At least roughly, if you need to know the details check the bottom.</p>

<p>To visualize this we simply map our concentric circles around the stations and use the population density as height.
Click, touch or hover to get the exact values. And sorry again, only new computers will get a meaningful result. Most
smart phones and tablets will have no problems.</p>

<iframe src="http://doodles.mountainmath.ca/skytrain_tod_map.html" width="80%" height="500", style="margin:5px 10%;"></iframe>


<p><a href="http://doodles.mountainmath.ca/skytrain_tod_map.html#11/49.2430/-123.0350" class="btn btn-primary">Full screen view</a></p>

<p>What immediately stands out is that for some stations inner orange circle is lower than the outer yellow circle. That means
the 400m radius area is less dense than the 800m radius area. It&rsquo;s as if
there was an inverse-TOD development. That&rsquo;s where local knowlege becomes important to see how exectly things are like
around the stations. Maybe the station primarily servers jobs or amenities, which we did not map. This definitely deserves
more scrutiny.</p>

<p><a href="http://censusmapper.ca/maps/302" target="_blank"><img  src="http://doodles.mountainmath.ca/images/population_density.png"  style="width:50%;float:left;margin-right:10px;"></a>
Of course we can also view this on the <a href="http://censusmapper.ca/maps/302?zoom=12&amp;lat=49.2545&amp;lng=-123.0433">CensusMapper population density map</a>
comes in handy, if we zoom in it breaks it down to the census block level. And CensusMapper will also function on your
old computer if that&rsquo;s what you are using.</p>

<h3>Next steps</h3>

<p>One clear drawback of the analysis is that it uses 2011 numbers, which are quite old by now. So it&rsquo;s probably worthwhile to
re-visit this once 2016 population numbers become available. In the meantime I should run the same analysis on the 2006
data to see how density around transit stations changed. Some other day.</p>

<h3>Details</h3>

<p>This section is only interesting for people who want to know how exactly the numbers were derived. Conveniently
<a href="https://twitter.com/dshkol/status/717768801664651264">Dmitry had the station data handy</a>, which I took and then threw out
the duplicates data for each station platform.</p>

<p>Getting exact number
of people in a given circle radius around a station would require a getting custom tabulation for Stats Canada. This
is clearly overkill for the application we are looking at, and if we really wanted to be more precise we should probably start
by using an isochrone, that is an area that is at a 10 minute walking distance from the station, instead of using a circle.</p>

<p>In the future we will bake the ability to compute isochrones right into CensusMapper. Right now CensusMapper
estimates population data for arbitrary regions, including circular ones, by checking which census blocks intersect
each circle and add up the populations. Actually, we have three differnt ways to do this</p>

<ol type="a">
<li>by just taking all dissemination blocks that intersect</li>
<li>by just taking all dissemination blocks with the majority of its area in the intersection with the region</li>
<li>by scaling all properties of the dissemination block according to the proportion of its area in the overlap with our region.</li>
</ol>


<p>Each has its own advantages and disadvantages, we felt that option 2 is best suited for our purposes.</p>

<p>So we end up with a slightly different areas from the circle, the area given by the
census blocks we included, and we compute population densities based on that area. Since we visualize the circles instead
of the union of the census blocks used the visualization is a little bit misleading, but there is some value in the simplicity
of sticking with circles.</p>

<p>Since we are only interested in population data
we are done. In the more general case, when we are interested in estimating other census variables, for example the average rent in the
area, CensusMapper would now go through the census geographies and match up appropriate geographies with the census blocks
to derive the appropriate estimates. The actual algorithm gets quite complex here. Extra weights, like the proportion of
households that rent (and not own), come into play, as well as data quality estimates. And yes, if we did opt to use area overlap
weights in the block level computation, we would base them on households instead of population. If I am vague here it&rsquo;s
because the algorithm is quite complex and not really fit for a blog post.</p>
]]></content>
  </entry>
  
</feed>
